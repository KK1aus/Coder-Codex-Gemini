# Coder-Reviewer-MCP

<div align="center">

![License](https://img.shields.io/badge/license-MIT-blue.svg)
![Python](https://img.shields.io/badge/python-3.12+-blue.svg)
![MCP](https://img.shields.io/badge/MCP-1.20.0+-green.svg)
![Status](https://img.shields.io/badge/status-beta-orange.svg)

[English Docs](README_EN.md)

**Claude + Coder (claude-glm/GLM-4.7) + Reviewer (Gemini) å¤šæ¨¡å‹åä½œæ¡†æ¶**

è®© **Claude (Opus)** ä½œä¸ºæ¶æ„å¸ˆè°ƒåº¦ **Coder (claude-glm/GLM-4.7)** æ‰§è¡Œä»£ç ä»»åŠ¡ã€**Reviewer (Gemini)** å®¡æ ¸ä»£ç è´¨é‡ï¼Œ<br>å½¢æˆ**è‡ªåŠ¨åŒ–çš„å¤šæ–¹åä½œé—­ç¯**ã€‚

[å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹) â€¢ [æ ¸å¿ƒç‰¹æ€§](#-æ ¸å¿ƒç‰¹æ€§) â€¢ [æ¶æ„è¯´æ˜](#-æ¶æ„è¯´æ˜) â€¢ [å·¥å…·è¯¦è§£](#ï¸-å·¥å…·è¯¦è§£) â€¢ [å®‰è£…æŒ‡å—](#-å®‰è£…æŒ‡å—)

</div>

---

## ğŸŒŸ æ ¸å¿ƒç‰¹æ€§

Coder-Reviewer-MCP é€šè¿‡è¿æ¥å¤šä¸ªé¡¶çº§æ¨¡å‹ï¼Œæ„å»ºäº†ä¸€ä¸ªé«˜æ•ˆã€ä½æˆæœ¬ä¸”é«˜è´¨é‡çš„ä»£ç ç”Ÿæˆä¸å®¡æ ¸æµæ°´çº¿ï¼š

| ç»´åº¦ | ä»·å€¼è¯´æ˜ |
| :--- | :--- |
| **ğŸ§  æˆæœ¬ä¼˜åŒ–** | **Claude (Opus)** è´Ÿè´£é«˜æ™ºå•†æ€è€ƒä¸è°ƒåº¦ï¼ˆè´µä½†å¼ºï¼‰ï¼Œ**Coder (claude-glm/GLM-4.7)** è´Ÿè´£ç¹é‡çš„ä»£ç æ‰§è¡Œï¼ˆé‡å¤§ç®¡é¥±ï¼‰ã€‚ |
| **ğŸ§© èƒ½åŠ›äº’è¡¥** | **Claude** è¡¥è¶³ **Coder** çš„åˆ›é€ åŠ›çŸ­æ¿ï¼Œ**Reviewer (Gemini)** æä¾›ç‹¬ç«‹çš„ç¬¬ä¸‰æ–¹å®¡æ ¸è§†è§’ã€‚ |
| **ğŸ›¡ï¸ è´¨é‡ä¿éšœ** | å¼•å…¥ç‹¬ç«‹å®¡æ ¸æœºåˆ¶ï¼š**Reviewer (Gemini)** æä¾›å®¢è§‚çš„ Code Reviewï¼Œç¡®ä¿ä»£ç å¥å£®æ€§ã€‚ |
| **ğŸ”„ å…¨è‡ªåŠ¨é—­ç¯** | æ”¯æŒ `æ‹†è§£` â†’ `æ‰§è¡Œ` â†’ `å®¡æ ¸` â†’ `é‡è¯•` çš„å…¨è‡ªåŠ¨æµç¨‹ï¼Œæœ€å¤§ç¨‹åº¦å‡å°‘äººå·¥å¹²é¢„ã€‚ |
| **ğŸ”„ ä¸Šä¸‹æ–‡ä¿æŒ** | **SESSION_ID** ä¼šè¯å¤ç”¨æœºåˆ¶ç¡®ä¿å¤šè½®åä½œä¸Šä¸‹æ–‡è¿è´¯ï¼Œæ”¯æŒé•¿ä»»åŠ¡ç¨³å®šæ‰§è¡Œï¼Œæ— ä¿¡æ¯ä¸¢å¤±ã€‚ |

## ğŸ¤– è§’è‰²åˆ†å·¥ä¸åä½œ

åœ¨è¿™ä¸ªä½“ç³»ä¸­ï¼Œæ¯ä¸ªæ¨¡å‹éƒ½æœ‰æ˜ç¡®çš„èŒè´£ï¼š

*   **Claude (Opus)**: ğŸ‘‘ **æ¶æ„å¸ˆ / åè°ƒè€…**
    *   è´Ÿè´£éœ€æ±‚åˆ†æã€ä»»åŠ¡æ‹†è§£ã€Prompt ä¼˜åŒ–ä»¥åŠæœ€ç»ˆå†³ç­–ã€‚
*   **Coder (claude-glm/GLM-4.7)**: ğŸ”¨ **æ‰§è¡Œè€…**
    *   è´Ÿè´£å…·ä½“çš„ä»£ç ç”Ÿæˆã€ä¿®æ”¹ã€æ‰¹é‡ä»»åŠ¡å¤„ç†ã€‚
    *   ä½¿ç”¨ claude-glm CLI å°è£…çš„ GLM-4.7 æ¨¡å‹ï¼Œæˆæœ¬ä½ã€æ‰§è¡ŒåŠ›å¼ºã€‚
*   **Reviewer (Gemini)**: âš–ï¸ **å®¡æ ¸å®˜ / ä»£ç é¡¾é—®**
    *   è´Ÿè´£ç‹¬ç«‹çš„ä»£ç è´¨é‡æŠŠå…³ï¼Œæä¾›å®¢è§‚çš„ Code Reviewã€‚
    *   ä½¿ç”¨ Google Gemini CLI è¿›è¡Œä»£ç å®¡æ ¸ã€‚

### ğŸ“Š å®æµ‹æ¡ˆä¾‹

**[å•å…ƒæµ‹è¯•æ‰¹é‡ç”Ÿæˆ](cases/2025-01-05-unit-test-generation/README.md)** - CCG æ¶æ„å®æµ‹è®°å½•

| æŒ‡æ ‡ | çº¯ Claude æ–¹æ¡ˆ | CCG åä½œæ–¹æ¡ˆ | è¯´æ˜ |
| :--- | :--- | :--- | :--- |
| **ä»»åŠ¡è§„æ¨¡** | 7,488 è¡Œä»£ç ï¼ˆ481 ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼‰ | 7,488 è¡Œä»£ç ï¼ˆ481 ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼‰ | ä¸ºæŸåç«¯é¡¹ç›®ç”Ÿæˆå•å…ƒæµ‹è¯• |
| **æ€»æˆæœ¬** | $3.13 | $0.55 | **èŠ‚çœ 82%** |
| **Claude æˆæœ¬** | $3.13 | $0.29 | **èŠ‚çœ 91%**ï¼ˆä»…æ¶æ„è°ƒåº¦ï¼‰ |
| **Coder æˆæœ¬** | $0 | $0.26 | æ‰§è¡Œç¹é‡ä»£ç ç”Ÿæˆä»»åŠ¡ |
| **è´¨é‡å®¡æ ¸** | âŒ æ— ç‹¬ç«‹å®¡æ ¸ | âœ… Reviewer (Gemini) ç»ˆå®¡ | ç‹¬ç«‹æŠŠå…³ï¼Œä»£ç è´¨é‡å¯æ§ |

**æ ¸å¿ƒä¼˜åŠ¿**ï¼š
- ğŸ’° **æˆæœ¬ä¼˜åŒ–**ï¼šClaude åªè¾“å‡ºç®€çŸ­æŒ‡ä»¤ï¼Œåˆ©ç”¨ä¾¿å®œçš„è¾“å…¥ä»·æ ¼å¤„ç†éªŒæ”¶å·¥ä½œï¼Œé¿å…è¾“å‡ºæ˜‚è´µçš„ä»£ç  token
- ğŸ”„ **ä¸Šä¸‹æ–‡ä¿æŒ**ï¼šSESSION_ID ä¼šè¯å¤ç”¨æœºåˆ¶ç¡®ä¿å¤šè½®åä½œä¸Šä¸‹æ–‡è¿è´¯ï¼Œæ”¯æŒé•¿ä»»åŠ¡ç¨³å®šæ‰§è¡Œ
- âš¡ **é•¿ä»»åŠ¡ç¨³å®šæ€§**ï¼šä¼˜åŒ–çš„ä»»åŠ¡æ‹†åˆ†ä¸é‡è¯•ç­–ç•¥ï¼Œç¡®ä¿å¤§å‹ä»»åŠ¡ï¼ˆå¦‚æ‰¹é‡ç”Ÿæˆ 7,488 è¡Œæµ‹è¯•ä»£ç ï¼‰ç¨³å®šå®Œæˆ
- ğŸ›¡ï¸ **è´¨é‡ä¿éšœ**ï¼šReviewer (Gemini) ç‹¬ç«‹å®¡æ ¸æœºåˆ¶ï¼Œä»£ç è´¨é‡å¯æ§

### åä½œæµç¨‹å›¾

```mermaid
flowchart TB
    subgraph UserLayer ["ç”¨æˆ·å±‚"]
        User(["ğŸ‘¤ ç”¨æˆ·éœ€æ±‚"])
    end

    subgraph ClaudeLayer ["Claude - æ¶æ„å¸ˆ"]
        Claude["ğŸ§  éœ€æ±‚åˆ†æ & ä»»åŠ¡æ‹†è§£"]
        Prompt["ğŸ“ æ„é€ ç²¾ç¡® Prompt"]
        Review["ğŸ” ç»“æœå®¡æŸ¥ & å†³ç­–"]
    end

    subgraph MCPLayer ["MCP æœåŠ¡å™¨"]
        MCP{{"âš™ï¸ Coder-Reviewer-MCP"}}
    end

    subgraph ToolLayer ["æ‰§è¡Œå±‚"]
        Coder["ğŸ”¨ Coder å·¥å…·<br><code>claude-glm CLI (GLM-4.7)</code><br>sandbox: workspace-write"]
        ReviewerTool["âš–ï¸ Reviewer å·¥å…·<br><code>gemini CLI</code><br>sandbox: read-only"]
    end

    User --> Claude
    Claude --> Prompt
    Prompt -->|"coder"| MCP

    MCP -->|"æµå¼ JSON"| Coder

    Coder -->|"SESSION_ID + result"| Review

    Review -->|"éœ€è¦å®¡æ ¸"| MCP
    MCP -->|"æµå¼ JSON"| ReviewerTool

    ReviewerTool -->|"å®¡æ ¸ç»“è®º"| Review

    Review -->|"âœ… é€šè¿‡"| Done(["ğŸ‰ ä»»åŠ¡å®Œæˆ"])
    Review -->|"âŒ éœ€ä¿®æ”¹"| Prompt
    Review -->|"âš ï¸ å°ä¼˜åŒ–"| Claude
```

**å…¸å‹å·¥ä½œæµ**ï¼š

```
1. ç”¨æˆ·æå‡ºéœ€æ±‚
       â†“
2. Claude åˆ†æã€æ‹†è§£ä»»åŠ¡ï¼Œæ„é€ ç²¾ç¡® Prompt
       â†“
3. è°ƒç”¨ coder å·¥å…· â†’ æ‰§è¡Œä»£ç ç”Ÿæˆ/ä¿®æ”¹
       â†“
4. Claude å®¡æŸ¥ç»“æœï¼Œå†³å®šæ˜¯å¦éœ€è¦ Reviewer å®¡æ ¸
       â†“
5. è°ƒç”¨ reviewer å·¥å…· â†’ ç‹¬ç«‹ Code Review
       â†“
6. æ ¹æ®å®¡æ ¸ç»“è®ºï¼šé€šè¿‡ / ä¼˜åŒ– / é‡æ–°æ‰§è¡Œ
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å‰ç½®è¦æ±‚

åœ¨å¼€å§‹ä¹‹å‰ï¼Œè¯·ç¡®ä¿æ‚¨å·²å®‰è£…ä»¥ä¸‹å·¥å…·ï¼š

*   **uv**: æé€Ÿ Python åŒ…ç®¡ç†å™¨ ([å®‰è£…æŒ‡å—](https://docs.astral.sh/uv/))
    *   Windows: `powershell -c "irm https://astral.sh/uv/install.ps1 | iex"`
    *   macOS/Linux: `curl -LsSf https://astral.sh/uv/install.sh | sh`
*   **Claude Code**: ç‰ˆæœ¬ **â‰¥ v2.0.56** ([å®‰è£…æŒ‡å—](https://code.claude.com/docs))
*   **claude-glm CLI**: ä½¿ç”¨ GLM-4.7 åç«¯çš„ Claude Code å…¼å®¹ CLIï¼ˆéœ€è‡ªè¡Œé…ç½®ï¼‰
*   **Gemini CLI**: ä»£ç å®¡æ ¸å·¥å…· ([å®‰è£…æŒ‡å—](https://github.com/google-gemini/gemini-cli))
*   **GLM-4.7 API Token**: ä» [æ™ºè°± AI](https://open.bigmodel.cn) è·å–

> **âš ï¸ é‡è¦æç¤ºï¼šè´¹ç”¨ä¸æƒé™**
> *   **å·¥å…·æˆæƒ**ï¼š`claude-glm` å’Œ `gemini` CLI å·¥å…·å‡éœ€åœ¨æœ¬åœ°å®Œæˆç™»å½•æˆæƒã€‚
> *   **è´¹ç”¨è¯´æ˜**ï¼šè¿™äº›å·¥å…·çš„ä½¿ç”¨é€šå¸¸æ¶‰åŠå®˜æ–¹è®¢é˜…è´¹ç”¨æˆ– API ä½¿ç”¨è´¹ã€‚
>     *   **Claude Code**: éœ€è¦ Anthropic è´¦å·åŠç›¸åº”çš„è®¡è´¹è®¾ç½®ã€‚ï¼ˆæˆ–ä¸‰æ–¹æ¥å…¥ï¼‰
>     *   **Gemini CLI**: å¯èƒ½æ¶‰åŠ Google AI è®¢é˜…æˆ– API è°ƒç”¨é™åˆ¶ã€‚
>     *   **claude-glm (GLM-4.7)**: éœ€è‡ªè¡Œæ‰¿æ‹…æ™ºè°± AI çš„ API è°ƒç”¨è´¹ç”¨ã€‚
> *   è¯·åœ¨æ­£å¼ä½¿ç”¨å‰ç¡®ä¿æ‰€æœ‰å·¥å…·å·²ç™»å½•ä¸”è´¦å·èµ„æºå……è¶³ã€‚

### âš¡ ä¸€é”®é…ç½®ï¼ˆæ¨èï¼‰

æˆ‘ä»¬æä¾›ä¸€é”®é…ç½®è„šæœ¬ï¼Œè‡ªåŠ¨å®Œæˆæ‰€æœ‰è®¾ç½®æ­¥éª¤ï¼š

**Windowsï¼ˆåŒå‡»è¿è¡Œæˆ–ç»ˆç«¯æ‰§è¡Œï¼‰**
```powershell
git clone https://github.com/KK1aus/Coder-Codex-Gemini.git
cd Coder-Codex-Gemini
.\setup.bat
```

**macOS/Linux**
```bash
git clone https://github.com/KK1aus/Coder-Codex-Gemini.git
cd Coder-Codex-Gemini
chmod +x setup.sh && ./setup.sh
```

**è„šæœ¬æ‰§è¡Œæµç¨‹**ï¼š

1. **æ£€æŸ¥å¹¶å®‰è£… uv** - å¦‚æœªå®‰è£…åˆ™è‡ªåŠ¨ä¸‹è½½å®‰è£…
2. **æ£€æŸ¥ claude-glm CLI** - éªŒè¯æ˜¯å¦å·²å®‰è£…
3. **å®‰è£…é¡¹ç›®ä¾èµ–** - è¿è¡Œ `uv sync`
4. **æ³¨å†Œ MCP æœåŠ¡å™¨** - è‡ªåŠ¨é…ç½®åˆ°ç”¨æˆ·çº§åˆ«
5. **å®‰è£… Skills** - å¤åˆ¶å·¥ä½œæµæŒ‡å¯¼åˆ° `~/.claude/skills/`
6. **é…ç½®å…¨å±€ Prompt** - è‡ªåŠ¨è¿½åŠ åˆ° `~/.claude/CLAUDE.md`

> ğŸ’¡ **æç¤º**ï¼šä¸€é”®é…ç½®å®Œæˆåï¼Œè¯·é‡å¯ Claude Code CLI ä½¿é…ç½®ç”Ÿæ•ˆã€‚

### Windows ç”¨æˆ·æ³¨æ„äº‹é¡¹

åœ¨ Windows ä¸Šä½¿ç”¨ Coder-Reviewer-MCPï¼Œè¯·ç¡®ä¿ä»¥ä¸‹ CLI å·¥å…·å·²æ­£ç¡®æ·»åŠ åˆ°ç³»ç»Ÿ PATHï¼š

| å·¥å…· | éªŒè¯å‘½ä»¤ | è¯´æ˜ |
|------|----------|------|
| `claude-glm` | `where claude-glm` | éœ€è‡ªè¡Œå®‰è£…é…ç½® |
| `gemini` | `where gemini` | é€šè¿‡ npm å…¨å±€å®‰è£… |
| `uv` | `where uv` | `%USERPROFILE%\.local\bin\uv.exe` |

**éªŒè¯å®‰è£…**ï¼š
```powershell
# æ£€æŸ¥æ‰€æœ‰å·¥å…·æ˜¯å¦å¯ç”¨
claude-glm --version
gemini --version
uv --version
```

### 2. å®‰è£… MCP æœåŠ¡å™¨

#### è¿œç¨‹å®‰è£…ï¼ˆæ¨èï¼‰

ä¸€é”®è„šæœ¬é»˜è®¤ä½¿ç”¨è¿œç¨‹å®‰è£…æ–¹å¼ï¼Œæ— éœ€é¢å¤–æ“ä½œã€‚å¦‚éœ€æ‰‹åŠ¨å®‰è£…ï¼š

```bash
claude mcp add ccg -s user --transport stdio -- uvx --refresh --from git+https://github.com/KK1aus/Coder-Codex-Gemini.git ccg-mcp
```

#### æœ¬åœ°å®‰è£…ï¼ˆä»…å¼€å‘è°ƒè¯•ï¼‰

å¦‚éœ€ä¿®æ”¹æºç æˆ–è°ƒè¯•ï¼Œå¯ä½¿ç”¨æœ¬åœ°å®‰è£…ï¼š

```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd /path/to/Coder-Codex-Gemini

# å®‰è£…ä¾èµ–
uv sync

# æ³¨å†Œ MCP æœåŠ¡å™¨ï¼ˆä½¿ç”¨æœ¬åœ°è·¯å¾„ï¼‰
# Windows
claude mcp add ccg -s user --transport stdio -- uv run --directory $pwd ccg-mcp

# macOS/Linux
claude mcp add ccg -s user --transport stdio -- uv run --directory $(pwd) ccg-mcp
```

**å¸è½½ MCP æœåŠ¡å™¨**
```bash
claude mcp remove ccg -s user
```

### 3. é…ç½® claude-glm

æ¨èä½¿ç”¨ **é…ç½®æ–‡ä»¶** æ–¹å¼è¿›è¡Œç®¡ç†ã€‚

**åˆ›å»ºé…ç½®ç›®å½•**:
```bash
# Windows
mkdir %USERPROFILE%\.claude-glm

# macOS/Linux
mkdir -p ~/.claude-glm
```

**åˆ›å»ºé…ç½®æ–‡ä»¶** `~/.claude-glm/config.toml`:
```toml
[general]
api_token = "your-api-token"  # å¿…å¡«ï¼Œä»æ™ºè°± AI è·å–
base_url = "https://open.bigmodel.cn/api/anthropic"
model = "glm-4.7"
```

### 4. å®‰è£… Skillsï¼ˆæ¨èï¼‰

Skills å±‚æä¾›å·¥ä½œæµæŒ‡å¯¼ï¼Œç¡®ä¿ Claude æ­£ç¡®ä½¿ç”¨ MCP å·¥å…·ã€‚

```bash
# Windows (PowerShell)
if (!(Test-Path "$env:USERPROFILE\.claude\skills")) { mkdir "$env:USERPROFILE\.claude\skills" }
xcopy /E /I "skills\ccg-workflow" "$env:USERPROFILE\.claude\skills\ccg-workflow"

# macOS/Linux
mkdir -p ~/.claude/skills
cp -r skills/ccg-workflow ~/.claude/skills/
```

### 5. é…ç½®å…¨å±€ Promptï¼ˆæ¨èï¼‰

åœ¨ `~/.claude/CLAUDE.md` ä¸­æ·»åŠ å¼ºåˆ¶è§„åˆ™ï¼Œç¡®ä¿ Claude éµå®ˆåä½œæµç¨‹ï¼š

```markdown
# å…¨å±€åè®®

## å¼ºåˆ¶è§„åˆ™

- **é»˜è®¤åä½œ**ï¼šæ‰€æœ‰ä»£ç /æ–‡æ¡£æ”¹åŠ¨ä»»åŠ¡ï¼Œ**å¿…é¡»**å§”æ‰˜ Coder æ‰§è¡Œï¼Œé˜¶æ®µæ€§å®Œæˆå**å¿…é¡»**è°ƒç”¨ Reviewer å®¡æ ¸
- **è·³è¿‡éœ€ç¡®è®¤**ï¼šè‹¥åˆ¤æ–­æ— éœ€åä½œï¼Œ**å¿…é¡»ç«‹å³æš‚åœ**å¹¶æŠ¥å‘Šï¼š
  > "è¿™æ˜¯ä¸€ä¸ªç®€å•çš„[æè¿°]ä»»åŠ¡ï¼Œæˆ‘åˆ¤æ–­æ— éœ€è°ƒç”¨ Coder/Reviewerã€‚æ˜¯å¦åŒæ„ï¼Ÿç­‰å¾…æ‚¨çš„ç¡®è®¤ã€‚"
- **è¿è§„å³ç»ˆæ­¢**ï¼šæœªç»ç¡®è®¤è·³è¿‡ Coder æ‰§è¡Œæˆ– Reviewer å®¡æ ¸ = **æµç¨‹è¿è§„**
- **å¿…é¡»ä¼šè¯å¤ç”¨**ï¼šå¿…é¡»ä¿å­˜æ¥æ”¶åˆ°çš„ `SESSION_ID` ï¼Œå¹¶å§‹ç»ˆåœ¨è¯·æ±‚å‚æ•°ä¸­æºå¸¦ `SESSION_ID` ä¿æŒä¸Šä¸‹æ–‡
- **SESSION_ID ç®¡ç†è§„èŒƒ**ï¼šCoder å’Œ Reviewer çš„ SESSION_ID ç›¸äº’ç‹¬ç«‹ï¼Œå¿…é¡»ä½¿ç”¨ MCP å·¥å…·å“åº”è¿”å›çš„å®é™… SESSION_ID å€¼ï¼Œä¸¥ç¦è‡ªåˆ› ID æˆ–æ··ç”¨

## âš ï¸ Skill é˜…è¯»å‰ç½®æ¡ä»¶ï¼ˆå¼ºåˆ¶ï¼‰

**åœ¨è°ƒç”¨ä»»ä½• Coder-Reviewer-MCP å·¥å…·ä¹‹å‰ï¼Œå¿…é¡»å…ˆæ‰§è¡Œå¯¹åº”çš„ Skill è·å–æœ€ä½³å®è·µæŒ‡å¯¼ï¼š**

| MCP å·¥å…· | å‰ç½® Skill | æ‰§è¡Œæ–¹å¼ |
|----------|-----------|---------|
| `mcp__ccg__coder` | `/ccg-workflow` | å¿…é¡»å…ˆæ‰§è¡Œ |
| `mcp__ccg__reviewer` | `/ccg-workflow` | å¿…é¡»å…ˆæ‰§è¡Œ |

**æ‰§è¡Œæµç¨‹**ï¼š
1. ç”¨æˆ·è¯·æ±‚ä½¿ç”¨ Coder/Reviewer
2. **ç«‹å³æ‰§è¡Œ Skill**ï¼ˆ`/ccg-workflow`ï¼‰
3. é˜…è¯» Skill è¿”å›çš„æŒ‡å¯¼å†…å®¹
4. æŒ‰ç…§æŒ‡å¯¼è°ƒç”¨ MCP å·¥å…·

**ç¦æ­¢è¡Œä¸º**ï¼š
- âŒ è·³è¿‡ Skill ç›´æ¥è°ƒç”¨ MCP å·¥å…·
- âŒ å‡è®¾å·²äº†è§£æœ€ä½³å®è·µè€Œä¸æ‰§è¡Œ Skill

---

# AI åä½œä½“ç³»

**Claude æ˜¯æœ€ç»ˆå†³ç­–è€…**ï¼Œæ‰€æœ‰ AI æ„è§ä»…ä¾›å‚è€ƒï¼Œéœ€æ‰¹åˆ¤æ€§æ€è€ƒååšå‡ºæœ€ä¼˜å†³ç­–ã€‚

## è§’è‰²åˆ†å·¥

| è§’è‰² | å®šä½ | ç”¨é€” | sandbox | é‡è¯• |
|------|------|------|---------|------|
| **Coder** | ä»£ç æ‰§è¡Œè€… | ç”Ÿæˆ/ä¿®æ”¹ä»£ç ã€æ‰¹é‡ä»»åŠ¡ | workspace-write | é»˜è®¤ä¸é‡è¯• |
| **Reviewer** | ä»£ç å®¡æ ¸è€… | è´¨é‡æŠŠå…³ã€Code Review | read-only | é»˜è®¤ 1 æ¬¡ |

## æ ¸å¿ƒæµç¨‹

1. **Coder æ‰§è¡Œ**ï¼šæ‰€æœ‰æ”¹åŠ¨ä»»åŠ¡å§”æ‰˜ Coder å¤„ç†
2. **Claude éªŒæ”¶**ï¼šCoder å®Œæˆåå¿«é€Ÿæ£€æŸ¥ï¼Œæœ‰è¯¯åˆ™ Claude è‡ªè¡Œä¿®å¤
3. **Reviewer å®¡æ ¸**ï¼šé˜¶æ®µæ€§å¼€å‘å®Œæˆåè°ƒç”¨ reviewï¼Œæœ‰è¯¯å§”æ‰˜ Coder ä¿®å¤ï¼ŒæŒç»­è¿­ä»£ç›´è‡³é€šè¿‡

## ä»»åŠ¡æ‹†åˆ†åŸåˆ™ï¼ˆåˆ†å‘ç»™ Coderï¼‰

> âš ï¸ **ä¸€æ¬¡è°ƒç”¨ï¼Œä¸€ä¸ªç›®æ ‡**ã€‚ç¦æ­¢å‘ Coder å †ç Œå¤šä¸ªä¸ç›¸å…³éœ€æ±‚ã€‚

- **ç²¾å‡† Prompt**ï¼šç›®æ ‡æ˜ç¡®ã€ä¸Šä¸‹æ–‡å……åˆ†ã€éªŒæ”¶æ ‡å‡†æ¸…æ™°
- **æŒ‰æ¨¡å—æ‹†åˆ†**ï¼šç›¸å…³æ”¹åŠ¨å¯åˆå¹¶ï¼Œç‹¬ç«‹æ¨¡å—åˆ†å¼€
- **é˜¶æ®µæ€§ Review**ï¼šæ¯æ¨¡å— Claude éªŒæ”¶ï¼Œé‡Œç¨‹ç¢‘å Reviewer å®¡æ ¸
```

> **è¯´æ˜**ï¼šçº¯ MCP ä¹Ÿèƒ½å·¥ä½œï¼Œä½†æ¨è Skills + å…¨å±€ Prompt é…ç½®ä»¥è·å¾—æœ€ä½³ä½“éªŒã€‚

### 6. éªŒè¯å®‰è£…

è¿è¡Œä»¥ä¸‹å‘½ä»¤æ£€æŸ¥ MCP æœåŠ¡å™¨çŠ¶æ€ï¼š

```bash
claude mcp list
```

âœ… çœ‹åˆ°ä»¥ä¸‹è¾“å‡ºå³è¡¨ç¤ºå®‰è£…æˆåŠŸï¼š
```text
ccg: ... - âœ“ Connected
```

### 7. (å¯é€‰) æƒé™é…ç½®

ä¸ºè·å¾—æµç•…ä½“éªŒï¼Œå¯åœ¨ `~/.claude/settings.json` ä¸­æ·»åŠ è‡ªåŠ¨æˆæƒï¼š

```json
{
  "permissions": {
    "allow": [
      "mcp__ccg__coder",
      "mcp__ccg__reviewer"
    ]
  }
}
```

## ğŸ› ï¸ å·¥å…·è¯¦è§£

### `coder` - ä»£ç æ‰§è¡Œè€…

è°ƒç”¨ claude-glm CLI (GLM-4.7) æ‰§è¡Œå…·ä½“çš„ä»£ç ç”Ÿæˆæˆ–ä¿®æ”¹ä»»åŠ¡ã€‚

| å‚æ•° | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
| :--- | :--- | :---: | :--- | :--- |
| `PROMPT` | string | âœ… | - | å…·ä½“çš„ä»»åŠ¡æŒ‡ä»¤å’Œä»£ç è¦æ±‚ |
| `cd` | Path | âœ… | - | ç›®æ ‡å·¥ä½œç›®å½• |
| `sandbox` | string | - | `workspace-write` | æ²™ç®±ç­–ç•¥ï¼Œé»˜è®¤å…è®¸å†™å…¥ |
| `SESSION_ID` | string | - | `""` | ä¼šè¯ IDï¼Œç”¨äºç»´æŒå¤šè½®å¯¹è¯ä¸Šä¸‹æ–‡ |
| `return_all_messages` | bool | - | `false` | æ˜¯å¦è¿”å›å®Œæ•´çš„å¯¹è¯å†å²ï¼ˆç”¨äºè°ƒè¯•ï¼‰ |
| `return_metrics` | bool | - | `false` | æ˜¯å¦åœ¨è¿”å›å€¼ä¸­åŒ…å«è€—æ—¶ç­‰æŒ‡æ ‡ |
| `timeout` | int | - | `300` | ç©ºé—²è¶…æ—¶ï¼ˆç§’ï¼‰ï¼Œæ— è¾“å‡ºè¶…è¿‡æ­¤æ—¶é—´è§¦å‘è¶…æ—¶ |
| `max_duration` | int | - | `1800` | æ€»æ—¶é•¿ç¡¬ä¸Šé™ï¼ˆç§’ï¼‰ï¼Œé»˜è®¤ 30 åˆ†é’Ÿï¼Œ0 è¡¨ç¤ºæ— é™åˆ¶ |
| `max_retries` | int | - | `0` | æœ€å¤§é‡è¯•æ¬¡æ•°ï¼ˆCoder é»˜è®¤ä¸é‡è¯•ï¼‰ |
| `log_metrics` | bool | - | `false` | æ˜¯å¦å°†æŒ‡æ ‡è¾“å‡ºåˆ° stderr |

### `reviewer` - ä»£ç å®¡æ ¸è€…

è°ƒç”¨ Gemini CLI è¿›è¡Œç‹¬ç«‹ä¸”ä¸¥æ ¼çš„ä»£ç å®¡æŸ¥ã€‚

| å‚æ•° | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
| :--- | :--- | :---: | :--- | :--- |
| `PROMPT` | string | âœ… | - | å®¡æ ¸ä»»åŠ¡æè¿° |
| `cd` | Path | âœ… | - | ç›®æ ‡å·¥ä½œç›®å½• |
| `sandbox` | string | - | `read-only` | **å¼ºåˆ¶åªè¯»**ï¼Œä¸¥ç¦å®¡æ ¸è€…ä¿®æ”¹ä»£ç  |
| `SESSION_ID` | string | - | `""` | ä¼šè¯ ID |
| `skip_git_repo_check` | bool | - | `true` | æ˜¯å¦å…è®¸åœ¨é Git ä»“åº“è¿è¡Œ |
| `return_all_messages` | bool | - | `false` | æ˜¯å¦è¿”å›å®Œæ•´çš„å¯¹è¯å†å²ï¼ˆç”¨äºè°ƒè¯•ï¼‰ |
| `image` | List[Path]| - | `[]` | é™„åŠ å›¾ç‰‡åˆ—è¡¨ï¼ˆç”¨äº UI å®¡æŸ¥ç­‰ï¼‰ |
| `model` | string | - | `""` | æŒ‡å®šæ¨¡å‹ï¼Œé»˜è®¤ä½¿ç”¨ Gemini è‡ªå·±çš„é…ç½® |
| `return_metrics` | bool | - | `false` | æ˜¯å¦åœ¨è¿”å›å€¼ä¸­åŒ…å«è€—æ—¶ç­‰æŒ‡æ ‡ |
| `timeout` | int | - | `300` | ç©ºé—²è¶…æ—¶ï¼ˆç§’ï¼‰ï¼Œæ— è¾“å‡ºè¶…è¿‡æ­¤æ—¶é—´è§¦å‘è¶…æ—¶ |
| `max_duration` | int | - | `1800` | æ€»æ—¶é•¿ç¡¬ä¸Šé™ï¼ˆç§’ï¼‰ï¼Œé»˜è®¤ 30 åˆ†é’Ÿï¼Œ0 è¡¨ç¤ºæ— é™åˆ¶ |
| `max_retries` | int | - | `1` | æœ€å¤§é‡è¯•æ¬¡æ•°ï¼ˆReviewer é»˜è®¤å…è®¸ 1 æ¬¡é‡è¯•ï¼‰ |
| `log_metrics` | bool | - | `false` | æ˜¯å¦å°†æŒ‡æ ‡è¾“å‡ºåˆ° stderr |
| `yolo` | bool | - | `false` | æ— éœ€å®¡æ‰¹è¿è¡Œæ‰€æœ‰å‘½ä»¤ï¼ˆè·³è¿‡æ²™ç®±ï¼‰ |
| `profile` | string | - | `""` | ä» ~/.reviewer/config.toml åŠ è½½çš„é…ç½®æ–‡ä»¶åç§° |

### è¶…æ—¶æœºåˆ¶

æœ¬é¡¹ç›®é‡‡ç”¨**åŒé‡è¶…æ—¶ä¿æŠ¤**æœºåˆ¶ï¼š

| è¶…æ—¶ç±»å‹ | å‚æ•° | é»˜è®¤å€¼ | è¯´æ˜ |
|----------|------|--------|------|
| **ç©ºé—²è¶…æ—¶** | `timeout` | 300s | æ— è¾“å‡ºè¶…è¿‡æ­¤æ—¶é—´è§¦å‘è¶…æ—¶ï¼Œæœ‰è¾“å‡ºåˆ™é‡ç½®è®¡æ—¶å™¨ |
| **æ€»æ—¶é•¿ç¡¬ä¸Šé™** | `max_duration` | 1800s | ä»å¼€å§‹è®¡æ—¶ï¼Œæ— è®ºæ˜¯å¦æœ‰è¾“å‡ºï¼Œè¶…è¿‡æ­¤æ—¶é—´å¼ºåˆ¶ç»ˆæ­¢ |

**é”™è¯¯ç±»å‹åŒºåˆ†**ï¼š
- `idle_timeout`ï¼šç©ºé—²è¶…æ—¶ï¼ˆæ— è¾“å‡ºï¼‰
- `timeout`ï¼šæ€»æ—¶é•¿è¶…æ—¶

### è¿”å›å€¼ç»“æ„

```json
// æˆåŠŸï¼ˆå¯ç”¨æŒ‡æ ‡ï¼Œreturn_metrics=trueï¼‰
{
  "success": true,
  "tool": "coder",
  "SESSION_ID": "uuid-string",
  "result": "å›å¤å†…å®¹",
  "metrics": {
    "ts_start": "2026-01-20T10:00:00.000Z",
    "ts_end": "2026-01-20T10:00:05.123Z",
    "duration_ms": 5123,
    "duration_seconds": 5.123,
    "tool": "coder",
    "sandbox": "workspace-write",
    "success": true,
    "retries": 0,
    "exit_code": 0,
    "prompt_chars": 256,
    "prompt_lines": 10,
    "result_chars": 1024,
    "result_lines": 50,
    "raw_output_lines": 60,
    "json_decode_errors": 0,
    "input_tokens": 305,
    "output_tokens": 64,
    "total_tokens": 369
  }
}

// å¤±è´¥ï¼ˆç»“æ„åŒ–é”™è¯¯ï¼‰
{
  "success": false,
  "tool": "coder",
  "error": "é”™è¯¯æ‘˜è¦",
  "error_kind": "idle_timeout | timeout | upstream_error | ...",
  "error_detail": {
    "message": "é”™è¯¯ç®€è¿°",
    "exit_code": 1,
    "last_lines": ["æœ€å20è¡Œè¾“å‡º..."],
    "idle_timeout_s": 300,
    "max_duration_s": 1800
  }
}
```

## ğŸ“š æ¶æ„è¯´æ˜

### ä¸‰å±‚é…ç½®æ¶æ„ï¼ˆClaude Codeï¼‰

æœ¬é¡¹ç›®åœ¨ Claude Code ç¯å¢ƒä¸‹é‡‡ç”¨ **MCP + Skills + å…¨å±€ Prompt** æ··åˆæ¶æ„ï¼Œå„å±‚èŒè´£åˆ†æ˜ï¼š

| å±‚çº§ | èŒè´£ | Token æ¶ˆè€— | å¿…éœ€æ€§ |
|------|------|-----------|--------|
| **MCP å±‚** | å·¥å…·å®ç°ï¼ˆç±»å‹å®‰å…¨ã€ç»“æ„åŒ–é”™è¯¯ã€é‡è¯•ã€metricsï¼‰ | å›ºå®šï¼ˆå·¥å…· schemaï¼‰ | **å¿…éœ€** |
| **Skills å±‚** | å·¥ä½œæµæŒ‡å¯¼ï¼ˆè§¦å‘æ¡ä»¶ã€æµç¨‹ã€æ¨¡æ¿ï¼‰ | æŒ‰éœ€åŠ è½½ | æ¨è |
| **å…¨å±€ Prompt å±‚** | å¼ºåˆ¶è§„åˆ™ï¼ˆç¡®ä¿ Claude éµå®ˆåä½œæµç¨‹ï¼‰ | å›ºå®šï¼ˆçº¦ 20 è¡Œï¼‰ | æ¨è |

**ä¸ºä»€ä¹ˆæ¨èå®Œæ•´é…ç½®ï¼Ÿ**
- **çº¯ MCP**ï¼šå·¥å…·å¯ç”¨ï¼Œä½† Claude å¯èƒ½ä¸ç†è§£ä½•æ—¶/å¦‚ä½•ä½¿ç”¨
- **+ Skills**ï¼šClaude å­¦ä¼šå·¥ä½œæµç¨‹ï¼ŒçŸ¥é“ä½•æ—¶è§¦å‘åä½œ
- **+ å…¨å±€ Prompt**ï¼šå¼ºåˆ¶è§„åˆ™ç¡®ä¿ Claude å§‹ç»ˆéµå®ˆåä½œçºªå¾‹

**Token ä¼˜åŒ–**ï¼šSkills æŒ‰éœ€åŠ è½½ï¼Œéä»£ç ä»»åŠ¡ä¸åŠ è½½å·¥ä½œæµæŒ‡å¯¼ï¼Œå¯æ˜¾è‘—èŠ‚çº¦ Token

---

## ğŸ§‘â€ğŸ’» å¼€å‘ä¸è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

```bash
# 1. å…‹éš†ä»“åº“
git clone https://github.com/KK1aus/Coder-Codex-Gemini.git
cd Coder-Codex-Gemini

# 2. å®‰è£…ä¾èµ– (ä½¿ç”¨ uv)
uv sync

# 3. æœ¬åœ°è°ƒè¯•è¿è¡Œ
uv run ccg-mcp
```

## ğŸ“š å‚è€ƒèµ„æº

- **FastMCP**: [GitHub](https://github.com/jlowin/fastmcp) - é«˜æ•ˆçš„ MCP æ¡†æ¶
- **GLM API**: [æ™ºè°± AI](https://open.bigmodel.cn) - å¼ºå¤§çš„å›½äº§å¤§æ¨¡å‹ï¼ˆæ¨èä½œä¸º Coder åç«¯ï¼‰
- **Claude Code**: [Documentation](https://docs.anthropic.com/en/docs/claude-code)
- **Gemini CLI**: [GitHub](https://github.com/google-gemini/gemini-cli) - Google Gemini å‘½ä»¤è¡Œå·¥å…·

## ğŸ“„ License

MIT
